[vite] connecting... client:733:9
[vite] connected. client:827:12
Download the React DevTools for a better development experience: https://react.dev/link/react-devtools react-dom_client.js:17995:54
ğŸ”„ Route check:
Object { currentPath: "/", isInitialized: false, isConnected: false, hasCall: false, hasIncoming: false }
App.tsx:46:13
ğŸ”§ Registering WebRTC events... useWebRTC.ts:17:13
ğŸ”§ Registering event: onRemoteStream useWebRTC.ts:95:15
ğŸ”§ Registering event: onConnectionStateChange useWebRTC.ts:95:15
ğŸ”§ Registering event: onLocalStreamUpdated useWebRTC.ts:95:15
ğŸ”§ Registering event: onCallRequest useWebRTC.ts:95:15
ğŸ”§ Registering event: onCallResponse useWebRTC.ts:95:15
ğŸ”§ Registering event: onCallEnd useWebRTC.ts:95:15
ğŸ”§ Registering event: onError useWebRTC.ts:95:15
âœ… All events registered useWebRTC.ts:98:13
ğŸ”„ Route check:
Object { currentPath: "/setup", isInitialized: false, isConnected: false, hasCall: false, hasIncoming: false }
App.tsx:46:13
âœ… Connected to signaling server WebRTCService.ts:92:19
ğŸ”„ Route check:
Object { currentPath: "/setup", isInitialized: false, isConnected: true, hasCall: false, hasIncoming: false }
App.tsx:46:13
ğŸ“¨ Received message from server: {"type":"connected","message":"Connected to WebRTC Signaling Server","serverTime":"2025-12-16T20:06:25.090Z"} WebRTCService.ts:106:19
ğŸ“¨ Handling message type: connected WebRTCService.ts:649:13
âœ… Server connection confirmed WebRTCService.ts:653:19
â„¹ï¸ WebRTC Service initialized with username: fede WebRTCService.ts:73:13
â„¹ï¸ Perfect Negotiation Pattern: ENABLED WebRTCService.ts:74:13
Already connected to server, registering user now... WebRTCService.ts:77:15
ğŸ”„ Route check:
Object { currentPath: "/setup", isInitialized: true, isConnected: true, hasCall: false, hasIncoming: false }
App.tsx:46:13
ğŸ“¨ Received message from server: {"type":"registered","username":"fede","message":"Registration successful"} WebRTCService.ts:106:19
ğŸ“¨ Handling message type: registered WebRTCService.ts:649:13
âœ… Registration confirmed WebRTCService.ts:656:19
ğŸ“¨ Received message from server: {"type":"user-list","users":[]} WebRTCService.ts:106:19
ğŸ“¨ Handling message type: user-list WebRTCService.ts:649:13
ğŸ“‹ Received users list:
Array []
WebRTCService.ts:659:19
ğŸ“¨ Received message from server: {"type":"incoming-call","from":"sip:client1@192.168.1.209","callId":"045684155104@192.168.1.209","sdp":{"type":"offer","sdp":"v=0\r\no=client1 0 0 IN IP4 192.168.1.209\r\ns=-\r\nt=0 0\r\nm=audio 10200 RTP/SAVPF 0 8\r\nc=IN IP4 192.168.1.247\r\na=rtpmap:0 PCMU/8000\r\na=rtpmap:8 PCMA/8000\r\na=sendrecv\r\na=rtcp:10201\r\na=rtcp-mux\r\na=crypto:1 AEAD_AES_256_GCM inline:JuI4AiqXrJr86CrxQTsVP++GEaO88SmlxTAnBb+fn1YdeakvMioUCzYVbK0\r\na=crypto:2 AEAD_AES_128_GCM inline:39wAAItPh3Svib3N6vD7yoMUrxvENLwoDHgfNw\r\na=crypto:3 AES_256_CM_HMAC_SHA1_80 inline:pfHxKg8LyBz1yhBHItIyOHIo9dglJdEOa2gOTv6yBdpWLNmAJhCpH6rmF1vfKg\r\na=crypto:4 AES_256_CM_HMAC_SHA1_32 inline:qZhdwAe4JUdPBD7xghUNVTZFrz2UFiWbLjRVrwepIl5U8MBTfGsMffeycnlUag\r\na=crypto:5 AES_192_CM_HMAC_SHA1_80 inline:yEBqVcs3295MdrLLpoAm3xM6QAg74LSOOIIufN1TAde2OEvESZ0\r\na=crypto:6 AES_192_CM_HMAC_SHA1_32 inline:AEViW3ZtnbprDw1tE9gRZaP1PzqVjBqusaHMKgwXC6Gk046rddU\r\na=crypto:7 AES_CM_128_HMAC_SHA1_80 inline:lUFuSq1XUbkW3+wgGVRvOWQ3oPxgq9JvyN0lkjZV\r\na=crypto:8 AES_CM_128_HMAC_SHA1_32 inline:rO+uzm5YT4LGTzeu+x5IXncVS9cT0+EsR8VLHkeE\r\na=crypto:9 F8_128_HMAC_SHA1_80 inline:/KgbAWJCqSuZhj1PWJNRAMQv7HIgG/WhWhLuaZiH\r\na=crypto:10 F8_128_HMAC_SHA1_32 inline:j0dICRC3ygiR2gtGLmM+X9t8r9bL6bfNiIDEgdOY\r\na=crypto:11 NULL_HMAC_SHA1_80 inline:rByT7KwDkwaMdIVXlPYxscDtlbnktE1chom9ZL0k\r\na=crypto:12 NULL_HMAC_SHA1_32 inline:7xna+GAnxpg1890dbPBlTRlNCc8Wd1uJHYpDrhCL\r\na=setup:actpass\r\na=fingerprint:sha-256 82:DF:BF:B3:CF:19:99:4A:25:72:07:87:85:0E:1B:9B:FA:EE:5B:A1:AE:5B:2E:A2:6C:80:79:29:D9:0A:AE:16\r\na=tls-id:30239365347bb4ba106946e4df50245c\r\na=ice-ufrag:OjgtMP1P\r\na=ice-pwd:E0NisTVR2YV5Cbva6c7LLwIJul\r\na=candidate:VRMyAWpGWNMuzzhw 1 UDP 2130706431 192.168.1.247 10200 typ host\r\na=candidate:VRMyAWpGWNMuzzhw 2 UDP 2130706430 192.168.1.247 10201 typ host\r\n"}} WebRTCService.ts:106:19
ğŸ“¨ Handling message type: incoming-call WebRTCService.ts:649:13
ğŸ“ Incoming SIP call from: sip:client1@192.168.1.209 callId: 045684155104@192.168.1.209 WebRTCService.ts:684:19
ğŸ’¾ Saved SIP call info:
Object { isSipCall: true, callId: "045684155104@192.168.1.209" }
WebRTCService.ts:688:19
ğŸ’¾ Saving pending offer with SDP WebRTCService.ts:693:21
ğŸ”” Hook: onCallRequest triggered by: sip:client1@192.168.1.209 useWebRTC.ts:45:17
ğŸ” Hook: Setting incomingCall state... useWebRTC.ts:46:17
âœ… Hook: incomingCall state set useWebRTC.ts:48:17
âœ… Hook: Toast shown useWebRTC.ts:53:17
ğŸ”„ Route check:
Object { currentPath: "/setup", isInitialized: true, isConnected: true, hasCall: false, hasIncoming: true }
App.tsx:46:13
â¡ï¸ Redirecting to call (has active call) App.tsx:61:15
ğŸ¥ Rendering VideoStream:
Object { participantName: "Utente", hasStream: false, showPlaceholderOverlay: true, isLocal: false }
VideoStream.tsx:167:11
ğŸ¥ Rendering VideoStream:
Object { participantName: "Tu", hasStream: false, showPlaceholderOverlay: false, isLocal: true }
VideoStream.tsx:167:11
ğŸ¥ VideoStream effect:
Object { hasStream: false, isVideoOff: false, isLocal: false, participantName: "Utente", streamId: undefined, tracks: undefined, isAudioOnly: false }
VideoStream.tsx:63:13
ğŸ¥ VideoStream effect:
Object { hasStream: false, isVideoOff: false, isLocal: true, participantName: "Tu", streamId: undefined, tracks: undefined, isAudioOnly: false }
VideoStream.tsx:63:13
ğŸ¥ Local stream - isVideoOff: false VideoStream.tsx:73:15
ğŸ“º VideoCall streams updated:
Object { hasLocal: false, hasRemote: false, localTracks: 0, remoteTracks: 0, isMuted: false, isVideoOff: false }
VideoCall.tsx:20:13
ğŸ“Š Call page state:
Object { isInitialized: true, isConnected: true, currentCall: undefined, incomingCall: "sip:client1@192.168.1.209", hasLocalStream: false, hasRemoteStream: false, localStreamId: undefined, remoteStreamId: undefined }
Call.tsx:98:13
ğŸ”„ Route check:
Object { currentPath: "/call", isInitialized: true, isConnected: true, hasCall: false, hasIncoming: true }
App.tsx:46:13
ğŸ”” Call: Accepting call from sip:client1@192.168.1.209 Call.tsx:84:15
ğŸ¥ Rendering VideoStream:
Object { participantName: "Utente", hasStream: false, showPlaceholderOverlay: true, isLocal: false }
VideoStream.tsx:167:11
ğŸ¥ Rendering VideoStream:
Object { participantName: "Tu", hasStream: false, showPlaceholderOverlay: false, isLocal: true }
VideoStream.tsx:167:11
Local stream updated useWebRTC.ts:41:17
ğŸ­ This peer is POLITE WebRTCService.ts:309:13
ğŸ“¤ Sending call-response (accepted) WebRTCService.ts:310:13
ğŸ”§ Creating peer connection... WebRTCService.ts:590:13
âœ… Peer connection created WebRTCService.ts:646:13
ğŸ“¥ Processing SIP offer immediately after accept... WebRTCService.ts:322:15
ğŸ“ Pending offer structure:
Object { hasType: true, hasSdp: true, sdpLength: 1639 }
WebRTCService.ts:323:15
ğŸ“¥ Setting remote description from SIP offer WebRTCService.ts:329:17
ğŸ¥ Rendering VideoStream:
Object { participantName: "Utente", hasStream: false, showPlaceholderOverlay: true, isLocal: false }
VideoStream.tsx:167:11
ğŸ¥ Rendering VideoStream:
Object { participantName: "Tu", hasStream: true, showPlaceholderOverlay: false, isLocal: true }
VideoStream.tsx:167:11
ğŸ¥ VideoStream effect:
Object { hasStream: true, isVideoOff: false, isLocal: true, participantName: "Tu", streamId: "{818c46c0-d74f-4769-838b-0e3711b92044}", tracks: (2) [â€¦], isAudioOnly: false }
VideoStream.tsx:63:13
ğŸ¥ Local stream - isVideoOff: false VideoStream.tsx:73:15
ğŸ¥ Setting video srcObject for: Tu VideoStream.tsx:151:13
ğŸ“º VideoCall streams updated:
Object { hasLocal: true, hasRemote: false, localTracks: 2, remoteTracks: 0, isMuted: false, isVideoOff: false }
VideoCall.tsx:20:13
ğŸ“º VideoCall sync effect:
Object { hasAudioTrack: true, hasVideoTrack: true, audioEnabled: true, videoEnabled: true, audioReadyState: "live", videoReadyState: "live" }
VideoCall.tsx:33:15
ğŸ“Š Call page state:
Object { isInitialized: true, isConnected: true, currentCall: undefined, incomingCall: "sip:client1@192.168.1.209", hasLocalStream: true, hasRemoteStream: false, localStreamId: "{818c46c0-d74f-4769-838b-0e3711b92044}", remoteStreamId: undefined }
Call.tsx:98:13
ğŸ“º Remote track received WebRTCService.ts:598:15
Remote stream received useWebRTC.ts:20:17
ğŸ“ Creating answer for SIP call... WebRTCService.ts:340:17
ğŸ¥ Rendering VideoStream:
Object { participantName: "Utente", hasStream: true, showPlaceholderOverlay: true, isLocal: false }
VideoStream.tsx:167:11
ğŸ¥ Rendering VideoStream:
Object { participantName: "Tu", hasStream: true, showPlaceholderOverlay: false, isLocal: true }
VideoStream.tsx:167:11
ğŸ”Š Detected audio-only stream for: Utente VideoStream.tsx:30:15
ğŸ¥ VideoStream effect:
Object { hasStream: true, isVideoOff: false, isLocal: false, participantName: "Utente", streamId: "{8a12c20a-79bc-4357-9c8e-5d31e0fcdfd2}", tracks: (1) [â€¦], isAudioOnly: false }
VideoStream.tsx:63:13
ğŸ¥ Setting video srcObject for: Utente VideoStream.tsx:151:13
ğŸ“º VideoCall streams updated:
Object { hasLocal: true, hasRemote: true, localTracks: 2, remoteTracks: 1, isMuted: false, isVideoOff: false }
VideoCall.tsx:20:13
ğŸ“Š Call page state:
Object { isInitialized: true, isConnected: true, currentCall: undefined, incomingCall: "sip:client1@192.168.1.209", hasLocalStream: true, hasRemoteStream: true, localStreamId: "{818c46c0-d74f-4769-838b-0e3711b92044}", remoteStreamId: "{8a12c20a-79bc-4357-9c8e-5d31e0fcdfd2}" }
Call.tsx:98:13
ğŸ§Š Waiting for ICE gathering to complete... WebRTCService.ts:343:17
ğŸ¥ Rendering VideoStream:
Object { participantName: "Utente", hasStream: true, showPlaceholderOverlay: true, isLocal: false }
VideoStream.tsx:167:11
ğŸ”„ Negotiation needed, creating offer... WebRTCService.ts:629:19
ğŸ§Š ICE gathering state: gathering WebRTCService.ts:290:17
ğŸ§Š Sending ICE candidate WebRTCService.ts:603:17
ğŸ”Š Setting audio srcObject for: Utente VideoStream.tsx:40:13
ğŸ”— Connection state: connecting WebRTCService.ts:614:15
Connection state changed to: connecting useWebRTC.ts:24:17
ğŸ§Š Sending ICE candidate 5 WebRTCService.ts:603:17
âœ… Audio playback started successfully for: Utente VideoStream.tsx:47:19
ğŸ¥ Rendering VideoStream:
Object { participantName: "sip:client1@192.168.1.209", hasStream: true, showPlaceholderOverlay: true, isLocal: false }
VideoStream.tsx:167:11
ğŸ¥ Rendering VideoStream:
Object { participantName: "Tu", hasStream: true, showPlaceholderOverlay: false, isLocal: true }
VideoStream.tsx:167:11
ğŸ“¤ Sending offer via negotiation WebRTCService.ts:631:19
ğŸ”Š Cleaning up audio for: Utente VideoStream.tsx:56:15
ğŸ¥ Cleaning up video for: Utente VideoStream.tsx:164:15
ğŸ”Š Detected audio-only stream for: sip:client1@192.168.1.209 VideoStream.tsx:30:15
ğŸ”Š Setting audio srcObject for: sip:client1@192.168.1.209 VideoStream.tsx:40:13
ğŸ¥ VideoStream effect:
Object { hasStream: true, isVideoOff: false, isLocal: false, participantName: "sip:client1@192.168.1.209", streamId: "{8a12c20a-79bc-4357-9c8e-5d31e0fcdfd2}", tracks: (1) [â€¦], isAudioOnly: true }
VideoStream.tsx:63:13
ğŸ“Š Call page state:
Object { isInitialized: true, isConnected: true, currentCall: "sip:client1@192.168.1.209", incomingCall: "sip:client1@192.168.1.209", hasLocalStream: true, hasRemoteStream: true, localStreamId: "{818c46c0-d74f-4769-838b-0e3711b92044}", remoteStreamId: "{8a12c20a-79bc-4357-9c8e-5d31e0fcdfd2}" }
Call.tsx:98:13
ğŸ”„ Route check:
Object { currentPath: "/call", isInitialized: true, isConnected: true, hasCall: true, hasIncoming: true }
App.tsx:46:13
ğŸ§Š Sending ICE candidate WebRTCService.ts:603:17
âœ… Audio playback started successfully for: sip:client1@192.168.1.209 VideoStream.tsx:47:19
ğŸ§Š Sending ICE candidate 19 WebRTCService.ts:603:17
ğŸ§Š ICE gathering state: complete WebRTCService.ts:290:17
âœ… ICE gathering complete WebRTCService.ts:294:19
âœ… ICE gathering complete, SDP contains candidates WebRTCService.ts:346:19
ğŸ”§ Normalized origin line: o=fede 147207305537532467 1 IN IP4 192.168.1.127 WebRTCService.ts:59:21
ğŸ“¤ Sending SIP answer
Object { isSipCall: true, hasIceCandidates: true, sdpLength: 5795, iceGatheringState: "complete", candidateCount: 24, normalized: true }
WebRTCService.ts:354:17
âœ… SIP offer processed successfully WebRTCService.ts:374:17
âœ… Call: Call accepted Call.tsx:86:15
ğŸ¥ Rendering VideoStream:
Object { participantName: "sip:client1@192.168.1.209", hasStream: true, showPlaceholderOverlay: true, isLocal: false }
VideoStream.tsx:167:11
ğŸ¥ Rendering VideoStream:
Object { participantName: "Tu", hasStream: true, showPlaceholderOverlay: false, isLocal: true }
VideoStream.tsx:167:11
ğŸ“Š Call page state:
Object { isInitialized: true, isConnected: true, currentCall: "sip:client1@192.168.1.209", incomingCall: undefined, hasLocalStream: true, hasRemoteStream: true, localStreamId: "{818c46c0-d74f-4769-838b-0e3711b92044}", remoteStreamId: "{8a12c20a-79bc-4357-9c8e-5d31e0fcdfd2}" }
Call.tsx:98:13
ğŸ”„ Route check:
Object { currentPath: "/call", isInitialized: true, isConnected: true, hasCall: true, hasIncoming: false }
App.tsx:46:13
ğŸ”´ Ending call
Object { currentCall: {â€¦}, isSipCall: true, callId: "045684155104@192.168.1.209" }
WebRTCService.ts:408:13
ğŸ“¤ Sending SIP hangup with callId: 045684155104@192.168.1.209 WebRTCService.ts:421:17
Local stream updated useWebRTC.ts:41:17
Call ended useWebRTC.ts:74:17
ğŸ”Š Cleaning up audio for: sip:client1@192.168.1.209 VideoStream.tsx:56:15
ğŸ¥ Cleaning up video for: Tu VideoStream.tsx:164:15
ğŸ“Š Call page state:
Object { isInitialized: true, isConnected: true, currentCall: undefined, incomingCall: undefined, hasLocalStream: false, hasRemoteStream: false, localStreamId: undefined, remoteStreamId: undefined }
Call.tsx:98:13
ğŸ”„ Route check:
Object { currentPath: "/call", isInitialized: true, isConnected: true, hasCall: false, hasIncoming: false }
App.tsx:46:13
â¡ï¸ Redirecting to dashboard (connected, no calls) App.tsx:66:15
ğŸ”„ Route check:
Object { currentPath: "/setup", isInitialized: true, isConnected: true, hasCall: false, hasIncoming: false }
App.tsx:46:13
ğŸ“¨ Received message from server: {"type":"call-ended","callId":"045684155104@192.168.1.209","reason":"Call terminated"} WebRTCService.ts:106:19
ğŸ“¨ Handling message type: call-ended WebRTCService.ts:649:13
ğŸ“ Call ended by: undefined WebRTCService.ts:772:19
Call ended useWebRTC.ts:74:17
Disconnected from signaling server WebRTCService.ts:115:19
