
{"level":"info","message":"PUBLIC_IP=auto detected, using local IP for LAN deployment","timestamp":"2025-11-25T14:42:51.230Z"}
{"advertiseIP":"192.168.1.127","level":"info","localIP":"192.168.1.127","message":"SIP Gateway initialized","rtpengine":"127.0.0.1:22222","sipServer":"192.168.1.209:5060","timestamp":"2025-11-25T14:42:51.234Z"}
{"level":"info","message":"HTTP server created (SSL disabled)","timestamp":"2025-11-25T14:42:51.236Z"}
{"level":"info","maxPayload":65536,"message":"WebSocket server created","protocol":"WS","timestamp":"2025-11-25T14:42:51.238Z"}
{"level":"info","message":"Testing RTPEngine connection...","timestamp":"2025-11-25T14:42:51.240Z"}
{"level":"info","message":"RTPEngine ping successful","result":{"result":"pong"},"timestamp":"2025-11-25T14:42:51.255Z"}
{"address":"192.168.1.127","level":"info","message":"SIP socket listening","port":5060,"timestamp":"2025-11-25T14:42:51.257Z"}
{"level":"info","message":"SIP Gateway ready and listening","timestamp":"2025-11-25T14:42:51.258Z"}
{"level":"info","message":"SIP Gateway initialized and ready","timestamp":"2025-11-25T14:42:51.258Z"}
{"level":"info","message":"Server ready, waiting for connections","timestamp":"2025-11-25T14:42:51.267Z"}
{"clientIP":"127.0.0.1","clientPort":34358,"level":"info","message":"New WebSocket connection","protocol":"WS","timestamp":"2025-11-25T14:42:56.064Z"}
{"level":"debug","message":"WebSocket message received","timestamp":"2025-11-25T14:42:58.642Z","type":"register","username":"anonymous"}
{"clientIP":"127.0.0.1","level":"info","message":"User registered","timestamp":"2025-11-25T14:42:58.644Z","totalUsers":1,"username":"fede"}
{"firstChars":"INVITE sip:fede@192.168.1.127:5060 SIP/2.0\r\nVia: S","fullMessage":"INVITE sip:fede@192.168.1.127:5060 SIP/2.0\r\nVia: SIP/2.0/UDP 192.168.1.209:5060;rport;branch=z9hG4bKef8a4d408af71f057fa6ef48\r\nVia: SIP/2.0/UDP 192.168.1.209:5062;branch=z9hG4bK692fce5c\r\nMax-Forwards: 69\r\nTo: <sip:fede@192.168.1.127>\r\nFrom: \"Client1\" <sip:client1@192.168.1.209>;tag=819586988215\r\nCall-ID: 169661950727@192.168.1.209\r\nCSeq: 1 INVITE\r\nRecord-Route: <sip:192.168.1.209;lr>\r\nContact: <sip:client1@192.168.1.209:5062>\r\nExpires: 3600\r\nUser-Agent: mjsip 2.0.5\r\nSupported: 100rel,timer\r\nAllow: INVITE,ACK,OPTIONS,BYE,CANCEL,INFO,PRACK,NOTIFY,MESSAGE,UPDATE\r\nContent-Length: 148\r\nContent-Type: application/sdp\r\n\r\nv=0\r\no=client1 0 0 IN IP4 192.168.1.209\r\ns=-\r\nc=IN IP4 192.168.1.209\r\nt=0 0\r\nm=audio 50000 RTP/AVP 0 8\r\na=rtpmap:0 PCMU/8000\r\na=rtpmap:8 PCMA/8000\r\n","length":768,"level":"debug","message":"Received raw message","source":"192.168.1.209:5060","timestamp":"2025-11-25T14:43:06.049Z"}
{"callId":"169661950727@192.168.1.209","from":"sip:client1@192.168.1.209","level":"info","message":"Incoming SIP call","timestamp":"2025-11-25T14:43:06.055Z","to":"fede"}
{"direction":"sip-incoming-offer","level":"debug","message":"SDP validation passed","timestamp":"2025-11-25T14:43:06.057Z"}
{"callId":"169661950727@192.168.1.209","from":"sip:client1@192.168.1.209","level":"info","message":"Incoming SIP call","targetUser":"fede","timestamp":"2025-11-25T14:43:06.065Z"}
{"level":"debug","message":"WebSocket message received","timestamp":"2025-11-25T14:43:07.891Z","type":"call-response","username":"fede"}
{"accepted":true,"from":"fede","level":"info","message":"Call response","timestamp":"2025-11-25T14:43:07.897Z","to":"sip:client1@192.168.1.209"}
{"callId":"169661950727@192.168.1.209","level":"info","message":"SIP call accepted by user, waiting for answer SDP","timestamp":"2025-11-25T14:43:07.904Z"}
{"level":"debug","message":"WebSocket message received","timestamp":"2025-11-25T14:43:08.122Z","type":"offer","username":"fede"}
{"from":"fede","level":"debug","message":"Forwarding offer","timestamp":"2025-11-25T14:43:08.131Z","to":"sip:client1@192.168.1.209"}
{"level":"debug","message":"WebSocket message received","timestamp":"2025-11-25T14:43:08.387Z","type":"answer","username":"fede"}
{"callId":"169661950727@192.168.1.209","level":"info","message":"Answering incoming SIP call","timestamp":"2025-11-25T14:43:08.393Z","webrtcUser":"fede"}
{"callId":"169661950727@192.168.1.209","length":5785,"level":"debug","message":"SDP received as string","timestamp":"2025-11-25T14:43:08.396Z"}
{"audioLine":"m=audio 42045 RTP/SAVPF 0 8 109 9 101","callId":"169661950727@192.168.1.209","codecs":["a=rtpmap:0 PCMU/8000","a=rtpmap:8 PCMA/8000","a=rtpmap:109 opus/48000/2","a=rtpmap:9 G722/8000/1","a=rtpmap:101 telephone-event/8000","a=rtpmap:120 VP8/90000","a=rtpmap:124 rtx/90000","a=rtpmap:121 VP9/90000","a=rtpmap:125 rtx/90000","a=rtpmap:126 H264/90000","a=rtpmap:127 rtx/90000","a=rtpmap:97 H264/90000","a=rtpmap:98 rtx/90000","a=rtpmap:105 H264/90000","a=rtpmap:106 rtx/90000","a=rtpmap:103 H264/90000","a=rtpmap:104 rtx/90000","a=rtpmap:99 AV1/90000","a=rtpmap:100 rtx/90000","a=rtpmap:123 ulpfec/90000","a=rtpmap:122 red/90000","a=rtpmap:119 rtx/90000"],"hasDTLS":true,"hasICE":true,"hasOpus":true,"hasPCMA":true,"hasPCMU":true,"level":"info","message":"WebRTC Answer SDP Analysis","timestamp":"2025-11-25T14:43:08.403Z","totalLines":153}
{"callId":"169661950727@192.168.1.209","level":"debug","message":"Complete WebRTC Answer SDP","sdp":"v=0\r\no=fede 2961297190794620886 1 IN IP4 192.168.1.127\r\ns=-\r\nt=0 0\r\na=sendrecv\r\na=fingerprint:sha-256 4E:E9:1F:C3:95:35:79:6E:27:49:1F:1C:F6:6B:FA:EF:FD:0B:0F:0C:0B:AA:F9:74:C8:30:4A:8F:DA:DE:19:78\r\na=group:BUNDLE 0 1\r\na=ice-options:trickle\r\na=msid-semantic:WMS *\r\nm=audio 42045 RTP/SAVPF 0 8 109 9 101\r\nc=IN IP4 192.168.1.127\r\na=candidate:0 1 UDP 2122121471 192.168.1.127 54656 typ host\r\na=candidate:2 1 UDP 2122187007 2001:b07:ab5:2bd:ee72:9a71:4ef1:a412 48456 typ host\r\na=candidate:4 1 UDP 2122252543 172.17.0.1 42045 typ host\r\na=candidate:6 1 TCP 2105393407 192.168.1.127 9 typ host tcptype active\r\na=candidate:7 1 TCP 2105458943 2001:b07:ab5:2bd:ee72:9a71:4ef1:a412 9 typ host tcptype active\r\na=candidate:8 1 TCP 2105524479 172.17.0.1 9 typ host tcptype active\r\na=candidate:1 1 UDP 1685921791 93.44.208.60 60663 typ srflx raddr 192.168.1.127 rport 54656\r\na=candidate:5 1 UDP 1686052863 93.44.208.60 60664 typ srflx raddr 172.17.0.1 rport 42045\r\na=sendrecv\r\na=end-of-candidates\r\na=extmap:1 urn:ietf:params:rtp-hdrext:ssrc-audio-level\r\na=extmap:2/recvonly urn:ietf:params:rtp-hdrext:csrc-audio-level\r\na=extmap:3 urn:ietf:params:rtp-hdrext:sdes:mid\r\na=extmap-allow-mixed\r\na=fmtp:109 maxplaybackrate=48000;stereo=1;useinbandfec=1\r\na=fmtp:101 0-15\r\na=ice-pwd:3e3cf824388322635a21493d4a8b7082\r\na=ice-ufrag:12524fcb\r\na=mid:0\r\na=msid:{db096e89-0063-4d98-8e42-c07638ddf6ea} {7c73a1c5-18ed-4953-a627-8289d35f2162}\r\na=rtcp-mux\r\na=rtpmap:0 PCMU/8000\r\na=rtpmap:8 PCMA/8000\r\na=rtpmap:109 opus/48000/2\r\na=rtpmap:9 G722/8000/1\r\na=rtpmap:101 telephone-event/8000\r\na=setup:actpass\r\na=ssrc:2421314204 cname:{6c948105-5f1f-4d90-8da5-fc9601c7b297}\r\nm=video 60666 UDP/TLS/RTP/SAVPF 120 124 121 125 126 127 97 98 105 106 103 104 99 100 123 122 119\r\nc=IN IP4 93.44.208.60\r\na=candidate:0 1 UDP 2122121471 192.168.1.127 40846 typ host\r\na=candidate:2 1 UDP 2122187007 2001:b07:ab5:2bd:ee72:9a71:4ef1:a412 52276 typ host\r\na=candidate:4 1 UDP 2122252543 172.17.0.1 52556 typ host\r\na=candidate:6 1 TCP 2105393407 192.168.1.127 9 typ host tcptype active\r\na=candidate:7 1 TCP 2105458943 2001:b07:ab5:2bd:ee72:9a71:4ef1:a412 9 typ host tcptype active\r\na=candidate:8 1 TCP 2105524479 172.17.0.1 9 typ host tcptype active\r\na=candidate:0 2 UDP 2122121470 192.168.1.127 57203 typ host\r\na=candidate:2 2 UDP 2122187006 2001:b07:ab5:2bd:ee72:9a71:4ef1:a412 38534 typ host\r\na=candidate:4 2 UDP 2122252542 172.17.0.1 48734 typ host\r\na=candidate:6 2 TCP 2105393406 192.168.1.127 9 typ host tcptype active\r\na=candidate:7 2 TCP 2105458942 2001:b07:ab5:2bd:ee72:9a71:4ef1:a412 9 typ host tcptype active\r\na=candidate:8 2 TCP 2105524478 172.17.0.1 9 typ host tcptype active\r\na=candidate:1 1 UDP 1685921791 93.44.208.60 60665 typ srflx raddr 192.168.1.127 rport 40846\r\na=candidate:5 1 UDP 1686052863 93.44.208.60 60666 typ srflx raddr 172.17.0.1 rport 52556\r\na=candidate:1 2 UDP 1685921790 93.44.208.60 60667 typ srflx raddr 192.168.1.127 rport 57203\r\na=candidate:5 2 UDP 1686052862 93.44.208.60 60668 typ srflx raddr 172.17.0.1 rport 48734\r\na=sendrecv\r\na=end-of-candidates\r\na=extmap:3 urn:ietf:params:rtp-hdrext:sdes:mid\r\na=extmap:4 http://www.webrtc.org/experiments/rtp-hdrext/abs-send-time\r\na=extmap:5 urn:ietf:params:rtp-hdrext:toffset\r\na=extmap:6/recvonly http://www.webrtc.org/experiments/rtp-hdrext/playout-delay\r\na=extmap:7 http://www.ietf.org/id/draft-holmer-rmcat-transport-wide-cc-extensions-01\r\na=extmap-allow-mixed\r\na=fmtp:126 profile-level-id=42e01f;level-asymmetry-allowed=1;packetization-mode=1\r\na=fmtp:97 profile-level-id=42e01f;level-asymmetry-allowed=1\r\na=fmtp:105 profile-level-id=42001f;level-asymmetry-allowed=1;packetization-mode=1\r\na=fmtp:103 profile-level-id=42001f;level-asymmetry-allowed=1\r\na=fmtp:120 max-fs=12288;max-fr=60\r\na=fmtp:124 apt=120\r\na=fmtp:121 max-fs=12288;max-fr=60\r\na=fmtp:125 apt=121\r\na=fmtp:127 apt=126\r\na=fmtp:98 apt=97\r\na=fmtp:106 apt=105\r\na=fmtp:104 apt=103\r\na=fmtp:100 apt=99\r\na=fmtp:119 apt=122\r\na=ice-pwd:3e3cf824388322635a21493d4a8b7082\r\na=ice-ufrag:12524fcb\r\na=mid:1\r\na=msid:{db096e89-0063-4d98-8e42-c07638ddf6ea} {749197cb-4e2e-4112-be1c-3c2f20165f88}\r\na=rtcp:60668 IN IP4 93.44.208.60\r\na=rtcp-fb:120 nack\r\na=rtcp-fb:120 nack pli\r\na=rtcp-fb:120 ccm fir\r\na=rtcp-fb:120 goog-remb\r\na=rtcp-fb:120 transport-cc\r\na=rtcp-fb:121 nack\r\na=rtcp-fb:121 nack pli\r\na=rtcp-fb:121 ccm fir\r\na=rtcp-fb:121 goog-remb\r\na=rtcp-fb:121 transport-cc\r\na=rtcp-fb:126 nack\r\na=rtcp-fb:126 nack pli\r\na=rtcp-fb:126 ccm fir\r\na=rtcp-fb:126 goog-remb\r\na=rtcp-fb:126 transport-cc\r\na=rtcp-fb:97 nack\r\na=rtcp-fb:97 nack pli\r\na=rtcp-fb:97 ccm fir\r\na=rtcp-fb:97 goog-remb\r\na=rtcp-fb:97 transport-cc\r\na=rtcp-fb:105 nack\r\na=rtcp-fb:105 nack pli\r\na=rtcp-fb:105 ccm fir\r\na=rtcp-fb:105 goog-remb\r\na=rtcp-fb:105 transport-cc\r\na=rtcp-fb:103 nack\r\na=rtcp-fb:103 nack pli\r\na=rtcp-fb:103 ccm fir\r\na=rtcp-fb:103 goog-remb\r\na=rtcp-fb:103 transport-cc\r\na=rtcp-fb:99 nack\r\na=rtcp-fb:99 nack pli\r\na=rtcp-fb:99 ccm fir\r\na=rtcp-fb:99 goog-remb\r\na=rtcp-fb:99 transport-cc\r\na=rtcp-fb:123 nack\r\na=rtcp-fb:123 nack pli\r\na=rtcp-fb:123 ccm fir\r\na=rtcp-fb:123 goog-remb\r\na=rtcp-fb:123 transport-cc\r\na=rtcp-fb:122 nack\r\na=rtcp-fb:122 nack pli\r\na=rtcp-fb:122 ccm fir\r\na=rtcp-fb:122 goog-remb\r\na=rtcp-fb:122 transport-cc\r\na=rtcp-mux\r\na=rtcp-rsize\r\na=rtpmap:120 VP8/90000\r\na=rtpmap:124 rtx/90000\r\na=rtpmap:121 VP9/90000\r\na=rtpmap:125 rtx/90000\r\na=rtpmap:126 H264/90000\r\na=rtpmap:127 rtx/90000\r\na=rtpmap:97 H264/90000\r\na=rtpmap:98 rtx/90000\r\na=rtpmap:105 H264/90000\r\na=rtpmap:106 rtx/90000\r\na=rtpmap:103 H264/90000\r\na=rtpmap:104 rtx/90000\r\na=rtpmap:99 AV1/90000\r\na=rtpmap:100 rtx/90000\r\na=rtpmap:123 ulpfec/90000\r\na=rtpmap:122 red/90000\r\na=rtpmap:119 rtx/90000\r\na=setup:actpass\r\na=ssrc:3988420272 cname:{6c948105-5f1f-4d90-8da5-fc9601c7b297}\r\na=ssrc:91868732 cname:{6c948105-5f1f-4d90-8da5-fc9601c7b297}\r\na=ssrc-group:FID 3988420272 91868732\r\n","timestamp":"2025-11-25T14:43:08.407Z"}
{"callId":"169661950727@192.168.1.209","level":"info","message":"Answering incoming SIP call","timestamp":"2025-11-25T14:43:08.410Z","webrtcUserId":"fede"}
{"callId":"169661950727@192.168.1.209","length":5785,"level":"debug","message":"SDP received as string","timestamp":"2025-11-25T14:43:08.413Z"}
{"direction":"webrtc-answer","level":"debug","message":"SDP validation passed","timestamp":"2025-11-25T14:43:08.418Z"}
{"direction":"sip-answer","level":"debug","message":"SDP validation passed","timestamp":"2025-11-25T14:43:08.433Z"}
{"callId":"169661950727@192.168.1.209","level":"debug","message":"SDP validation passed","timestamp":"2025-11-25T14:43:08.447Z"}
{"callId":"169661950727@192.168.1.209","level":"debug","message":"Filtered SDP for SIP client","removedVideo":true,"sdp":"v=0\r\no=fede 2961297190794620886 1 IN IP4 192.168.1.127\r\ns=-\r\nt=0 0\r\nm=audio 17408 RTP/AVP 0 8\r\nc=IN IP4 192.168.1.127\r\na=rtpmap:0 PCMU/8000\r\na=rtpmap:8 PCMA/8000\r\na=sendrecv\r\na=rtcp:17409\r\n","timestamp":"2025-11-25T14:43:08.450Z"}
{"callId":"169661950727@192.168.1.209","level":"info","message":"200 OK sent","timestamp":"2025-11-25T14:43:08.455Z","toTag":"e2d978091a2beaa2"}
{"callId":"169661950727@192.168.1.209","level":"info","message":"SIP call answered successfully","timestamp":"2025-11-25T14:43:08.464Z"}
{"firstChars":"ACK sip:gateway@192.168.1.127:5060 SIP/2.0\r\nVia: S","fullMessage":"ACK sip:gateway@192.168.1.127:5060 SIP/2.0\r\nVia: SIP/2.0/UDP 192.168.1.209:5060;rport;branch=z9hG4bKbc8503e0b274236c81c058dd\r\nVia: SIP/2.0/UDP 192.168.1.209:5062;branch=z9hG4bKf35d10f9\r\nRoute: <sip:gateway@192.168.1.127:5060;lr>\r\nMax-Forwards: 69\r\nTo: <sip:fede@192.168.1.127>;tag=e2d978091a2beaa2\r\nFrom: \"Client1\" <sip:client1@192.168.1.209>;tag=819586988215\r\nCall-ID: 169661950727@192.168.1.209\r\nCSeq: 1 ACK\r\nContact: <sip:client1@192.168.1.209:5062>\r\nExpires: 3600\r\nUser-Agent: mjsip 2.0.5\r\nContent-Length: 0\r\n\r\n","length":515,"level":"debug","message":"Received raw message","source":"192.168.1.209:5060","timestamp":"2025-11-25T14:43:08.578Z"}
{"callId":"169661950727@192.168.1.209","level":"info","message":"ACK received - call fully established","retransmissions":0,"timestamp":"2025-11-25T14:43:08.582Z"}
{"callId":"169661950727@192.168.1.209","level":"debug","message":"INVITE transaction completed and removed","timestamp":"2025-11-25T14:43:08.582Z","transactionKey":"169661950727@192.168.1.209-1 INVITE-z9hG4bKef8a4d408af71f057fa6ef48"}
{"level":"debug","message":"WebSocket message received","timestamp":"2025-11-25T14:43:15.365Z","type":"hangup","username":"fede"}
{"callId":"169661950727@192.168.1.209","level":"info","message":"Hangup request received","timestamp":"2025-11-25T14:43:15.367Z","to":"sip:client1@192.168.1.209","username":"fede"}
{"callId":"169661950727@192.168.1.209","direction":"incoming","level":"info","message":"Hanging up SIP call","timestamp":"2025-11-25T14:43:15.368Z","webrtcUser":"fede"}
{"callId":"169661950727@192.168.1.209","direction":"incoming","level":"info","message":"Hanging up call","timestamp":"2025-11-25T14:43:15.369Z","webrtcUser":"fede"}
{"callId":"169661950727@192.168.1.209","level":"debug","message":"Hangup target resolved","targetHost":"192.168.1.209","targetPort":5062,"targetUri":"sip:client1@192.168.1.209:5062","timestamp":"2025-11-25T14:43:15.370Z"}
{"callId":"169661950727@192.168.1.209","level":"debug","message":"BYE sent","targetHost":"192.168.1.209","targetPort":5062,"timestamp":"2025-11-25T14:43:15.371Z"}
{"callId":"169661950727@192.168.1.209","level":"debug","message":"Cleaning up session","timestamp":"2025-11-25T14:43:15.372Z"}
{"callId":"169661950727@192.168.1.209","level":"debug","message":"INVITE transaction removed during cleanup","timestamp":"2025-11-25T14:43:15.372Z","transactionKey":"169661950727@192.168.1.209-1 INVITE-z9hG4bKef8a4d408af71f057fa6ef48"}
{"callId":"169661950727@192.168.1.209","level":"debug","message":"RTPEngine session deleted","timestamp":"2025-11-25T14:43:15.383Z"}
{"activeSessions":0,"callId":"169661950727@192.168.1.209","level":"info","message":"Session cleanup complete","timestamp":"2025-11-25T14:43:15.384Z"}
{"callId":"169661950727@192.168.1.209","level":"info","message":"SIP hangup successful","timestamp":"2025-11-25T14:43:15.386Z"}
{"from":"fede","level":"debug","message":"Forwarding hangup to WebRTC peer","timestamp":"2025-11-25T14:43:15.389Z","to":"sip:client1@192.168.1.209"}
{"firstChars":"SIP/2.0 200 OK\r\nVia: SIP/2.0/UDP 192.168.1.127:506","fullMessage":"SIP/2.0 200 OK\r\nVia: SIP/2.0/UDP 192.168.1.127:5060;branch=z9hG4bK9ff8d1a92bf37d208846dc3660e1a3fa\r\nTo: \"Client1\" <sip:client1@192.168.1.209>;tag=819586988215\r\nFrom: <sip:fede@192.168.1.127>;tag=e2d978091a2beaa2\r\nCall-ID: 169661950727@192.168.1.209\r\nCSeq: 2 BYE\r\nServer: mjsip 2.0.5\r\nContent-Length: 0\r\n\r\n","length":305,"level":"debug","message":"Received raw message","source":"192.168.1.209:5062","timestamp":"2025-11-25T14:43:15.390Z"}
{"level":"warn","message":"Shutdown initiated","signal":"SIGINT","timestamp":"2025-11-25T14:43:29.208Z"}
