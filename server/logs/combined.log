[2025-12-16T20:05:58.867Z] info: Server ready, waiting for connections
[2025-12-16T20:06:25.089Z] info: New WebSocket connection {"clientIP":"127.0.0.1","clientPort":34426,"protocol":"WS"}
[2025-12-16T20:06:28.266Z] debug: WebSocket message received {"username":"anonymous","type":"register"}
[2025-12-16T20:06:28.267Z] info: User registered {"username":"fede","totalUsers":1,"clientIP":"127.0.0.1"}
[2025-12-16T20:06:58.251Z] debug: Received raw message {"source":"192.168.1.209:5060","length":768,"firstChars":"INVITE sip:fede@192.168.1.247:5060 SIP/2.0\r\nVia: S","fullMessage":"INVITE sip:fede@192.168.1.247:5060 SIP/2.0\r\nVia: SIP/2.0/UDP 192.168.1.209:5060;rport;branch=z9hG4bK48ecdce9913671b5d939fa61\r\nVia: SIP/2.0/UDP 192.168.1.209:5062;branch=z9hG4bKad2673a9\r\nMax-Forwards: 69\r\nTo: <sip:fede@192.168.1.247>\r\nFrom: \"Client1\" <sip:client1@192.168.1.209>;tag=181657265502\r\nCall-ID: 045684155104@192.168.1.209\r\nCSeq: 1 INVITE\r\nRecord-Route: <sip:192.168.1.209;lr>\r\nContact: <sip:client1@192.168.1.209:5062>\r\nExpires: 3600\r\nUser-Agent: mjsip 2.0.5\r\nSupported: 100rel,timer\r\nAllow: INVITE,ACK,OPTIONS,BYE,CANCEL,INFO,PRACK,NOTIFY,MESSAGE,UPDATE\r\nContent-Length: 148\r\nContent-Type: application/sdp\r\n\r\nv=0\r\no=client1 0 0 IN IP4 192.168.1.209\r\ns=-\r\nc=IN IP4 192.168.1.209\r\nt=0 0\r\nm=audio 50000 RTP/AVP 0 8\r\na=rtpmap:0 PCMU/8000\r\na=rtpmap:8 PCMA/8000\r\n"}
[2025-12-16T20:06:58.258Z] info: Incoming SIP call {"callId":"045684155104@192.168.1.209","from":"sip:client1@192.168.1.209","to":"fede"}
[2025-12-16T20:06:58.260Z] debug: SDP validation passed {"direction":"sip-incoming-offer"}
[2025-12-16T20:06:58.281Z] info: Incoming SIP call {"targetUser":"fede","from":"sip:client1@192.168.1.209","callId":"045684155104@192.168.1.209"}
[2025-12-16T20:07:06.014Z] debug: WebSocket message received {"username":"fede","type":"call-response"}
[2025-12-16T20:07:06.014Z] info: Call response {"from":"fede","to":"sip:client1@192.168.1.209","accepted":true}
[2025-12-16T20:07:06.017Z] info: SIP call accepted by user, waiting for answer SDP {"callId":"045684155104@192.168.1.209"}
[2025-12-16T20:07:06.487Z] debug: WebSocket message received {"username":"fede","type":"offer"}
[2025-12-16T20:07:06.489Z] debug: Forwarding offer {"from":"fede","to":"sip:client1@192.168.1.209"}
[2025-12-16T20:07:06.750Z] debug: WebSocket message received {"username":"fede","type":"answer"}
[2025-12-16T20:07:06.756Z] info: Answering incoming SIP call {"callId":"045684155104@192.168.1.209","webrtcUser":"fede"}
[2025-12-16T20:07:06.760Z] debug: SDP received as string {"callId":"045684155104@192.168.1.209","length":5795}
[2025-12-16T20:07:06.766Z] info: WebRTC Answer SDP Analysis {"callId":"045684155104@192.168.1.209","totalLines":153,"audioLine":"m=audio 51621 RTP/SAVPF 0 8 109 9 101","codecs":["a=rtpmap:0 PCMU/8000","a=rtpmap:8 PCMA/8000","a=rtpmap:109 opus/48000/2","a=rtpmap:9 G722/8000/1","a=rtpmap:101 telephone-event/8000","a=rtpmap:120 VP8/90000","a=rtpmap:124 rtx/90000","a=rtpmap:121 VP9/90000","a=rtpmap:125 rtx/90000","a=rtpmap:126 H264/90000","a=rtpmap:127 rtx/90000","a=rtpmap:97 H264/90000","a=rtpmap:98 rtx/90000","a=rtpmap:105 H264/90000","a=rtpmap:106 rtx/90000","a=rtpmap:103 H264/90000","a=rtpmap:104 rtx/90000","a=rtpmap:99 AV1/90000","a=rtpmap:100 rtx/90000","a=rtpmap:123 ulpfec/90000","a=rtpmap:122 red/90000","a=rtpmap:119 rtx/90000"],"hasPCMU":true,"hasPCMA":true,"hasOpus":true,"hasICE":true,"hasDTLS":true}
[2025-12-16T20:07:06.770Z] debug: Complete WebRTC Answer SDP {"callId":"045684155104@192.168.1.209","sdp":"v=0\r\no=fede 147207305537532467 1 IN IP4 192.168.1.127\r\ns=-\r\nt=0 0\r\na=sendrecv\r\na=fingerprint:sha-256 F3:4F:AF:2D:A0:FA:37:B7:41:FD:DD:7B:02:BB:80:DF:1F:57:1E:6E:7D:83:C8:BD:0A:6C:0C:F6:88:A3:D5:8E\r\na=group:BUNDLE 0 1\r\na=ice-options:trickle\r\na=msid-semantic:WMS *\r\nm=audio 51621 RTP/SAVPF 0 8 109 9 101\r\nc=IN IP4 192.168.1.247\r\na=candidate:0 1 UDP 2122121471 192.168.1.247 52203 typ host\r\na=candidate:2 1 UDP 2122187007 2001:b07:ab5:2bd:cb24:9620:4381:8a90 50912 typ host\r\na=candidate:4 1 UDP 2122252543 172.17.0.1 51621 typ host\r\na=candidate:6 1 TCP 2105393407 192.168.1.247 9 typ host tcptype active\r\na=candidate:7 1 TCP 2105458943 2001:b07:ab5:2bd:cb24:9620:4381:8a90 9 typ host tcptype active\r\na=candidate:8 1 TCP 2105524479 172.17.0.1 9 typ host tcptype active\r\na=candidate:1 1 UDP 1685921791 93.44.215.227 42298 typ srflx raddr 192.168.1.247 rport 52203\r\na=candidate:5 1 UDP 1686052863 93.44.215.227 42299 typ srflx raddr 172.17.0.1 rport 51621\r\na=sendrecv\r\na=end-of-candidates\r\na=extmap:1 urn:ietf:params:rtp-hdrext:ssrc-audio-level\r\na=extmap:2/recvonly urn:ietf:params:rtp-hdrext:csrc-audio-level\r\na=extmap:3 urn:ietf:params:rtp-hdrext:sdes:mid\r\na=extmap-allow-mixed\r\na=fmtp:109 maxplaybackrate=48000;stereo=1;useinbandfec=1\r\na=fmtp:101 0-15\r\na=ice-pwd:acda76ff7b00b34a24eabe67ec73f54b\r\na=ice-ufrag:579c87eb\r\na=mid:0\r\na=msid:{818c46c0-d74f-4769-838b-0e3711b92044} {f43c238c-5f4e-4d1d-928b-5232061a03d4}\r\na=rtcp-mux\r\na=rtpmap:0 PCMU/8000\r\na=rtpmap:8 PCMA/8000\r\na=rtpmap:109 opus/48000/2\r\na=rtpmap:9 G722/8000/1\r\na=rtpmap:101 telephone-event/8000\r\na=setup:actpass\r\na=ssrc:748384928 cname:{3f8dfc40-5314-4498-b519-7812fe95c17b}\r\nm=video 42301 UDP/TLS/RTP/SAVPF 120 124 121 125 126 127 97 98 105 106 103 104 99 100 123 122 119\r\nc=IN IP4 93.44.215.227\r\na=candidate:0 1 UDP 2122121471 192.168.1.247 60948 typ host\r\na=candidate:2 1 UDP 2122187007 2001:b07:ab5:2bd:cb24:9620:4381:8a90 46561 typ host\r\na=candidate:4 1 UDP 2122252543 172.17.0.1 50962 typ host\r\na=candidate:6 1 TCP 2105393407 192.168.1.247 9 typ host tcptype active\r\na=candidate:7 1 TCP 2105458943 2001:b07:ab5:2bd:cb24:9620:4381:8a90 9 typ host tcptype active\r\na=candidate:8 1 TCP 2105524479 172.17.0.1 9 typ host tcptype active\r\na=candidate:0 2 UDP 2122121470 192.168.1.247 45832 typ host\r\na=candidate:2 2 UDP 2122187006 2001:b07:ab5:2bd:cb24:9620:4381:8a90 60073 typ host\r\na=candidate:4 2 UDP 2122252542 172.17.0.1 45950 typ host\r\na=candidate:6 2 TCP 2105393406 192.168.1.247 9 typ host tcptype active\r\na=candidate:7 2 TCP 2105458942 2001:b07:ab5:2bd:cb24:9620:4381:8a90 9 typ host tcptype active\r\na=candidate:8 2 TCP 2105524478 172.17.0.1 9 typ host tcptype active\r\na=candidate:1 1 UDP 1685921791 93.44.215.227 42300 typ srflx raddr 192.168.1.247 rport 60948\r\na=candidate:5 1 UDP 1686052863 93.44.215.227 42301 typ srflx raddr 172.17.0.1 rport 50962\r\na=candidate:1 2 UDP 1685921790 93.44.215.227 42302 typ srflx raddr 192.168.1.247 rport 45832\r\na=candidate:5 2 UDP 1686052862 93.44.215.227 42303 typ srflx raddr 172.17.0.1 rport 45950\r\na=sendrecv\r\na=end-of-candidates\r\na=extmap:3 urn:ietf:params:rtp-hdrext:sdes:mid\r\na=extmap:4 http://www.webrtc.org/experiments/rtp-hdrext/abs-send-time\r\na=extmap:5 urn:ietf:params:rtp-hdrext:toffset\r\na=extmap:6/recvonly http://www.webrtc.org/experiments/rtp-hdrext/playout-delay\r\na=extmap:7 http://www.ietf.org/id/draft-holmer-rmcat-transport-wide-cc-extensions-01\r\na=extmap-allow-mixed\r\na=fmtp:126 profile-level-id=42e01f;level-asymmetry-allowed=1;packetization-mode=1\r\na=fmtp:97 profile-level-id=42e01f;level-asymmetry-allowed=1\r\na=fmtp:105 profile-level-id=42001f;level-asymmetry-allowed=1;packetization-mode=1\r\na=fmtp:103 profile-level-id=42001f;level-asymmetry-allowed=1\r\na=fmtp:120 max-fs=12288;max-fr=60\r\na=fmtp:124 apt=120\r\na=fmtp:121 max-fs=12288;max-fr=60\r\na=fmtp:125 apt=121\r\na=fmtp:127 apt=126\r\na=fmtp:98 apt=97\r\na=fmtp:106 apt=105\r\na=fmtp:104 apt=103\r\na=fmtp:100 apt=99\r\na=fmtp:119 apt=122\r\na=ice-pwd:acda76ff7b00b34a24eabe67ec73f54b\r\na=ice-ufrag:579c87eb\r\na=mid:1\r\na=msid:{818c46c0-d74f-4769-838b-0e3711b92044} {6d372fd3-d553-43b2-89c5-e7540d53a5f3}\r\na=rtcp:42303 IN IP4 93.44.215.227\r\na=rtcp-fb:120 nack\r\na=rtcp-fb:120 nack pli\r\na=rtcp-fb:120 ccm fir\r\na=rtcp-fb:120 goog-remb\r\na=rtcp-fb:120 transport-cc\r\na=rtcp-fb:121 nack\r\na=rtcp-fb:121 nack pli\r\na=rtcp-fb:121 ccm fir\r\na=rtcp-fb:121 goog-remb\r\na=rtcp-fb:121 transport-cc\r\na=rtcp-fb:126 nack\r\na=rtcp-fb:126 nack pli\r\na=rtcp-fb:126 ccm fir\r\na=rtcp-fb:126 goog-remb\r\na=rtcp-fb:126 transport-cc\r\na=rtcp-fb:97 nack\r\na=rtcp-fb:97 nack pli\r\na=rtcp-fb:97 ccm fir\r\na=rtcp-fb:97 goog-remb\r\na=rtcp-fb:97 transport-cc\r\na=rtcp-fb:105 nack\r\na=rtcp-fb:105 nack pli\r\na=rtcp-fb:105 ccm fir\r\na=rtcp-fb:105 goog-remb\r\na=rtcp-fb:105 transport-cc\r\na=rtcp-fb:103 nack\r\na=rtcp-fb:103 nack pli\r\na=rtcp-fb:103 ccm fir\r\na=rtcp-fb:103 goog-remb\r\na=rtcp-fb:103 transport-cc\r\na=rtcp-fb:99 nack\r\na=rtcp-fb:99 nack pli\r\na=rtcp-fb:99 ccm fir\r\na=rtcp-fb:99 goog-remb\r\na=rtcp-fb:99 transport-cc\r\na=rtcp-fb:123 nack\r\na=rtcp-fb:123 nack pli\r\na=rtcp-fb:123 ccm fir\r\na=rtcp-fb:123 goog-remb\r\na=rtcp-fb:123 transport-cc\r\na=rtcp-fb:122 nack\r\na=rtcp-fb:122 nack pli\r\na=rtcp-fb:122 ccm fir\r\na=rtcp-fb:122 goog-remb\r\na=rtcp-fb:122 transport-cc\r\na=rtcp-mux\r\na=rtcp-rsize\r\na=rtpmap:120 VP8/90000\r\na=rtpmap:124 rtx/90000\r\na=rtpmap:121 VP9/90000\r\na=rtpmap:125 rtx/90000\r\na=rtpmap:126 H264/90000\r\na=rtpmap:127 rtx/90000\r\na=rtpmap:97 H264/90000\r\na=rtpmap:98 rtx/90000\r\na=rtpmap:105 H264/90000\r\na=rtpmap:106 rtx/90000\r\na=rtpmap:103 H264/90000\r\na=rtpmap:104 rtx/90000\r\na=rtpmap:99 AV1/90000\r\na=rtpmap:100 rtx/90000\r\na=rtpmap:123 ulpfec/90000\r\na=rtpmap:122 red/90000\r\na=rtpmap:119 rtx/90000\r\na=setup:actpass\r\na=ssrc:4283639870 cname:{3f8dfc40-5314-4498-b519-7812fe95c17b}\r\na=ssrc:2312070146 cname:{3f8dfc40-5314-4498-b519-7812fe95c17b}\r\na=ssrc-group:FID 4283639870 2312070146\r\n"}
[2025-12-16T20:07:06.777Z] info: Answering incoming SIP call {"callId":"045684155104@192.168.1.209","webrtcUserId":"fede"}
[2025-12-16T20:07:06.779Z] debug: SDP received as string {"callId":"045684155104@192.168.1.209","length":5795}
[2025-12-16T20:07:06.786Z] debug: SDP validation passed {"direction":"webrtc-answer"}
[2025-12-16T20:07:06.923Z] debug: SDP validation passed {"direction":"sip-answer"}
[2025-12-16T20:07:06.934Z] debug: SDP validation passed {"callId":"045684155104@192.168.1.209"}
[2025-12-16T20:07:06.935Z] debug: Filtered SDP for SIP client {"callId":"045684155104@192.168.1.209","removedVideo":true,"sdp":"v=0\r\no=fede 147207305537532467 1 IN IP4 192.168.1.127\r\ns=-\r\nt=0 0\r\nm=audio 11950 rtp/avp 0 8\r\na=rtpmap:0 PCMU/8000\r\na=rtpmap:8 PCMA/8000\r\na=sendrecv\r\na=rtcp:11951\r\n"}
[2025-12-16T20:07:06.942Z] info: 200 OK sent {"callId":"045684155104@192.168.1.209","toTag":"7dfd17171720de03"}
[2025-12-16T20:07:06.943Z] info: SIP call answered successfully {"callId":"045684155104@192.168.1.209"}
[2025-12-16T20:07:07.047Z] debug: Received raw message {"source":"192.168.1.209:5060","length":515,"firstChars":"ACK sip:gateway@192.168.1.247:5060 SIP/2.0\r\nVia: S","fullMessage":"ACK sip:gateway@192.168.1.247:5060 SIP/2.0\r\nVia: SIP/2.0/UDP 192.168.1.209:5060;rport;branch=z9hG4bKd7cc72a02f2b45054c93ceab\r\nVia: SIP/2.0/UDP 192.168.1.209:5062;branch=z9hG4bK17212d88\r\nRoute: <sip:gateway@192.168.1.247:5060;lr>\r\nMax-Forwards: 69\r\nTo: <sip:fede@192.168.1.247>;tag=7dfd17171720de03\r\nFrom: \"Client1\" <sip:client1@192.168.1.209>;tag=181657265502\r\nCall-ID: 045684155104@192.168.1.209\r\nCSeq: 1 ACK\r\nContact: <sip:client1@192.168.1.209:5062>\r\nExpires: 3600\r\nUser-Agent: mjsip 2.0.5\r\nContent-Length: 0\r\n\r\n"}
[2025-12-16T20:07:07.057Z] info: ACK received - call fully established {"callId":"045684155104@192.168.1.209","retransmissions":0}
[2025-12-16T20:07:07.058Z] debug: INVITE transaction completed and removed {"callId":"045684155104@192.168.1.209","transactionKey":"045684155104@192.168.1.209-1 INVITE-z9hG4bK48ecdce9913671b5d939fa61"}
[2025-12-16T20:07:34.713Z] debug: WebSocket message received {"username":"fede","type":"hangup"}
[2025-12-16T20:07:34.793Z] info: Hangup request received {"username":"fede","callId":"045684155104@192.168.1.209","to":"sip:client1@192.168.1.209"}
[2025-12-16T20:07:34.794Z] info: Hanging up SIP call {"callId":"045684155104@192.168.1.209","direction":"incoming","webrtcUser":"fede"}
[2025-12-16T20:07:34.809Z] info: Hanging up call {"callId":"045684155104@192.168.1.209","direction":"incoming","webrtcUser":"fede"}
[2025-12-16T20:07:34.811Z] debug: Hangup target resolved {"callId":"045684155104@192.168.1.209","targetUri":"sip:client1@192.168.1.209:5062","targetHost":"192.168.1.209","targetPort":5062}
[2025-12-16T20:07:34.813Z] debug: BYE sent {"callId":"045684155104@192.168.1.209","targetHost":"192.168.1.209","targetPort":5062}
[2025-12-16T20:07:34.818Z] debug: Cleaning up session {"callId":"045684155104@192.168.1.209"}
[2025-12-16T20:07:34.818Z] debug: INVITE transaction removed during cleanup {"callId":"045684155104@192.168.1.209","transactionKey":"045684155104@192.168.1.209-1 INVITE-z9hG4bK48ecdce9913671b5d939fa61"}
[2025-12-16T20:07:34.930Z] debug: Received raw message {"source":"192.168.1.209:5062","length":305,"firstChars":"SIP/2.0 200 OK\r\nVia: SIP/2.0/UDP 192.168.1.247:506","fullMessage":"SIP/2.0 200 OK\r\nVia: SIP/2.0/UDP 192.168.1.247:5060;branch=z9hG4bKb80e280cee5dbd8867749834364140a8\r\nTo: \"Client1\" <sip:client1@192.168.1.209>;tag=181657265502\r\nFrom: <sip:fede@192.168.1.247>;tag=7dfd17171720de03\r\nCall-ID: 045684155104@192.168.1.209\r\nCSeq: 2 BYE\r\nServer: mjsip 2.0.5\r\nContent-Length: 0\r\n\r\n"}
[2025-12-16T20:07:34.940Z] debug: RTPEngine session deleted {"callId":"045684155104@192.168.1.209"}
[2025-12-16T20:07:34.997Z] info: Session cleanup complete {"callId":"045684155104@192.168.1.209","activeSessions":0}
[2025-12-16T20:07:35.005Z] info: SIP hangup successful {"callId":"045684155104@192.168.1.209"}
[2025-12-16T20:07:35.013Z] debug: Forwarding hangup to WebRTC peer {"from":"fede","to":"sip:client1@192.168.1.209"}
^C[2025-12-16T20:08:41.908Z] warn: Shutdown initiated {"signal":"SIGINT"}
[2025-12-16T20:08:41.917Z] info: Shutting down SIP Gateway...
[2025-12-16T20:08:41.922Z] info: SIP Gateway shutdown complete {"metrics":{"activeSessions":0,"totalCalls":1,"failedCalls":0,"reInvites":0,"startTime":1765915558800,"dtmfDigitsReceived":0,"retriedInvites":0,"uptime":163122,"sessionsCount":0,"transactionsCount":0,"inviteTransactionsCount":0}}
[2025-12-16T20:08:41.923Z] info: Server shutdown complete
